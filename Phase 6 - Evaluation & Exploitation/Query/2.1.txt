PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX etype: <http://knowdive.disi.unitn.it/etype#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

# 2.1 (Marco): Given a point on a map with its coordinates, what is the nearest stop to it?
# In order to do this quary we are approximating the distance measure and ordering all the stops by its approx_distance value

SELECT ?stop_name ?stop_latitude ?stop_longitude 
       ((ABS(xsd:float(?stop_latitude) - 46.071772) + 
         ABS(xsd:float(?stop_longitude) - 11.1196671)) AS ?approx_distance) 
WHERE {
    ?stop etype:name ?stop_name ;
          etype:latitude ?stop_latitude ;
          etype:longitude ?stop_longitude .
}
ORDER BY ?approx_distance LIMIT 1000